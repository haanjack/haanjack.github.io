<div id="language-switcher">
    <a href="{{ page.url | replace: '/ko/', '/en/' }}" id="en-link" onclick="setLanguage(event, 'en')">EN</a> |
    <a href="{{ page.url | replace: '/en/', '/ko/' }}" id="ko-link" onclick="setLanguage(event, 'ko')">KO</a>
</div>

<script>
    function setLanguage(event, lang) {
        event.preventDefault(); // ê¸°ë³¸ ì´ë™ ë™ì‘ ë°©ì§€
        sessionStorage.setItem("selectedLang", lang);

        // í˜„ì¬ URLì—ì„œ '/ko/' <-> '/en/' ë³€í™˜
        let newUrl = window.location.href.includes("/ko/")
                     ? window.location.href.replace("/ko/", "/en/")
                     : window.location.href.replace("/en/", "/ko/");

        window.location.href = newUrl; // ì™„ì „í•œ í˜ì´ì§€ ì´ë™
    }

    document.addEventListener("DOMContentLoaded", function() {
        let selectedLang = sessionStorage.getItem("selectedLang") || "ko";
        document.documentElement.setAttribute("data-lang", selectedLang);

        let koLink = document.getElementById("ko-link");
        let enLink = document.getElementById("en-link");

        if (selectedLang == "ko") {
            koLink.innerHTML = "<b>KO</b>";
        }
        if (selectedLang == "en") {
            enLink.innerHTML = "<b>EN</b>";
        }

        // ğŸ” ê²Œì‹œê¸€ í•„í„°ë§ ì ìš©
        document.querySelectorAll(".post-item").forEach(post => {
            console.log("data-lang:", post.dataset.lang);
            if (post.dataset.lang === selectedLang) {
                post.style.display = "block";
            } else {
                post.style.display = "none";
            }
        });
    });
</script>

<style>
#language-switcher {
    text-align: right;
    margin: 10px;
    font-size: 16px;
}
#language-switcher a {
    color: var(--global-text-color);
    text-decoration: none;
    cursor: pointer;
}
#language-switcher b {
    color: var(--global-theme-color);
    text-decoration: none;
    cursor: pointer;
}
#language-switcher a:hover {
    color: var(--global-hover-color);
}
</style>
